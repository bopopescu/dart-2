<!-- Copyright (c) 2011, the Dart project authors.  Please see the AUTHORS file
     for details. All rights reserved. Use of this source code is governed by a
     BSD-style license that can be found in the LICENSE file. -->

<!DOCTYPE html>

<html>
  <head>
    <script type="application/javascript" src="compiler.js"></script>
    <script>
      // TODO(jimhug): Awful hack to use JS for chrome extension APIs
      //   and then call into dart.  Add chrome extension APIs and remove
      //   this ugly and brittle hack.
      function onRequest(request, sender, sendResponse) {
        // TODO(jimhug): Would like to show dart icon - but how?
        //chrome.pageAction.show(sender.tab.id);
        sendResponse({js:dartCompile(request.code)});
      };
      chrome.extension.onRequest.addListener(onRequest);
    </script>
  </head>
</html>